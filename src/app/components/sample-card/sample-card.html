@if (isBrowser() && weatherData()) {
<div class="bg-gray-200 rounded-3xl px-6 py-6 flex flex-col gap-4 shadow-lg border border-gray-300">
    <!-- Header Section -->
    <div class="flex flex-col gap-2 text-center">
        <div class="flex items-center justify-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="w-5 h-5 text-slate-600">
                <path fill-rule="evenodd"
                    d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z"
                    clip-rule="evenodd" />
            </svg>
            <h2 class="text-xl font-bold text-slate-800">
                {{ weatherData()?.name }}, {{ weatherData()?.sys?.country }}
            </h2>
        </div>
        <p class="text-slate-500 text-[11px]">
            {{ getFormattedTime(weatherData()!.dt) | date: 'EEEE, MMMM d, y, h:mm a' }}
        </p>
        <div class="flex items-center justify-center gap-2">
            @if (weatherData()?.main?.humidity && weatherData()!.main.humidity > 70) {
            <span
                class="inline-flex items-center px-2 py-1 rounded-full text-[10px] font-semibold bg-slate-200 text-gray-700 border border-gray-300">
                High Humidity   
            </span>
            }@else{
            <span
                class="inline-flex items-center px-2 py-1 rounded-full text-[10px] font-semibold bg-slate-200 text-gray-700 border border-gray-300">
                Moderate Humidity
            </span>
            }
        </div>
    </div>

    <hr class="border-gray-400">

    <!-- Weather Icon and Temperature -->
    <div class="flex flex-col gap-2 text-center">
        @if (weatherData()?.weather?.[0]?.icon) {
        <img [src]="getWeatherIconUrl(weatherData()!.weather[0].icon)" [alt]="weatherData()?.weather?.[0]?.description"
            class="w-24 h-24 md:w-28 md:h-28 mx-auto drop-shadow-2xl" />
        }
        <div class="text-5xl font-bold text-slate-800">
            {{ weatherData()!.main.temp | number: '1.0-0' }}{{ getTemperatureUnit() }}
        </div>
        <div class="text-lg text-slate-600 capitalize font-medium">
            {{ weatherData()?.weather?.[0]?.description }}
        </div>
        <div class="text-xs text-slate-500">
            Feels like {{ weatherData()!.main.feels_like | number: '1.0-0' }}{{ getTemperatureUnit() }}
        </div>
    </div>

    <!-- Weather Details Grid -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        <div
            class="flex flex-col gap-1 items-center text-center p-3 bg-slate-50 rounded-xl transition-all duration-300 hover:shadow-lg border  border-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none"
                stroke="#475569" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2a2 2 0 0 1 2 2v12a4 4 0 1 1-4 0V4a2 2 0 0 1 2-2z" />
                <line x1="12" y1="6" x2="12" y2="6.01" />
                <line x1="12" y1="10" x2="12" y2="10.01" />
            </svg>
            <div class="text-[10px] text-gray-500 uppercase font-semibold tracking-wide">High</div>
            <div class="text-base font-bold text-gray-800">
                {{ weatherData()!.main.temp_max | number: '1.0-0' }}{{ getTemperatureUnit() }}
            </div>
        </div>

        <div
            class="flex flex-col gap-1 items-center text-center p-3 bg-slate-50 rounded-xl transition-all duration-300 hover:shadow-lg border border-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none"
                stroke="#475569" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2a2 2 0 0 1 2 2v12a4 4 0 1 1-4 0V4a2 2 0 0 1 2-2z" />
                <circle cx="12" cy="16" r="1" />
            </svg>
            <div class="text-[10px] text-slate-500 uppercase font-semibold tracking-wide">Low</div>
            <div class="text-base font-bold text-slate-800">
                {{ weatherData()!.main.temp_min | number: '1.0-0' }}{{ getTemperatureUnit() }}
            </div>
        </div>

        <div
            class="flex flex-col gap-1 items-center text-center p-3 bg-slate-50 rounded-xl transition-all duration-300 hover:shadow-lg border border-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="25" height="25" role="img"
                aria-labelledby="windTitle windDesc" style="display:block;">
                <title id="windTitle">Wind icon</title>
                <desc id="windDesc">Three curved airflow lines representing wind or breeze.</desc>
                <style>
                    .wind-line {
                        fill: none;
                        stroke: #64748b;
                        stroke-width: 2.6;
                        stroke-linecap: round;
                        stroke-linejoin: round;
                    }
                </style>
                <path class="wind-line" d="M6 20c6-6 18-6 26-2 6 3 10 10 2 14" />
                <path class="wind-line" d="M4 34c7-5 20-5 28-1 6 3 8 10 0 12" />
                <path class="wind-line" d="M8 48c8-6 22-6 30-2 6 3 8 10 0 10" />
            </svg>
            <div class="text-[10px] text-slate-500 uppercase font-semibold tracking-wide">Wind</div>
            <div class="text-base font-bold text-slate-800">
                {{ weatherData()?.wind?.speed | number: '1.1-1' }} m/s
            </div>
        </div>

        <div
            class="flex flex-col items-center gap-1 text-center p-3 bg-slate-50 rounded-xl transition-all duration-300 hover:shadow-lg border border-gray-300">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="25" height="25" role="img"
                aria-label="Humidity icon">
                <style>
                    .drop {
                        fill: none;
                        stroke: #64748b;
                        stroke-width: 3;
                        stroke-linecap: round;
                        stroke-linejoin: round;
                    }
                </style>
                <path class="drop" d="M32 6 C20 22, 12 32, 12 42 a20 20 0 0 0 40 0 C52 32, 44 22, 32 6z" />
            </svg>
            <div class="text-[10px] text-slate-500 uppercase font-semibold tracking-wide">Humidity</div>
            <div class="text-base font-bold text-slate-800">
                {{ weatherData()?.main?.humidity }}%
            </div>
        </div>
    </div>

    <!-- Sunrise & Sunset -->
    <div class="grid grid-cols-2 gap-3 text-center">
        <div class="p-3 bg-slate-50 rounded-xl border border-gray-300 shadow-sm hover:shadow-md transition-all">
            <div class="flex items-center gap-2 justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                    class="w-5 h-5 text-gray-600">
                    <path
                        d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.166a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75V21a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM7.758 17.303a.75.75 0 00-1.061-1.06l-1.591 1.59a.75.75 0 001.06 1.061l1.591-1.59zM6 12a.75.75 0 01-.75.75H3a.75.75 0 010-1.5h2.25A.75.75 0 016 12zM6.697 7.757a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 00-1.061 1.06l1.59 1.591z" />
                </svg>
                <div class="text-[10px] text-slate-600 uppercase font-bold tracking-wide">Sunrise</div>
            </div>
            <div class="text-lg font-bold text-slate-800">
                {{ getFormattedTime(weatherData()!.sys.sunrise) | date: 'h:mm a' }}
            </div>
        </div>

        <div class="p-3 bg-slate-50 rounded-xl border border-gray-300 shadow-sm hover:shadow-md transition-all">
            <div class="flex items-center gap-2 justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                    class="w-5 h-5 text-gray-600">
                    <path fill-rule="evenodd"
                        d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"
                        clip-rule="evenodd" />
                </svg>
                <div class="text-[10px] text-slate-600 uppercase font-bold tracking-wide">Sunset</div>
            </div>
            <div class="text-lg font-bold text-slate-800">
                {{ getFormattedTime(weatherData()!.sys.sunset) | date: 'h:mm a' }}
            </div>
        </div>
    </div>
</div>
}